<!DOCTYPE html>
<html lang="en">
  {{> head}}

  <body class="dark-theme">
    {{> header}}

    <main>
      <!-- Page Header -->
      <section class="page-header">
        <div class="container">
          <h1 class="page-title">{{content.pages.events.title}}</h1>
          <p class="page-subtitle">{{content.pages.events.intro}}</p>
        </div>
      </section>

      <!-- Events List -->
      <section class="section section-events">
        <div class="container">
          <!-- Next Run Highlight -->
          {{#if nextRun}}
            <div class="next-run-highlight">
              <span class="highlight-label">{{content.pages.events.nextRunLabel}}</span>
              <div class="event-card featured {{nextRun.color}}">
                <div class="event-date">
                  <span class="date-day">{{nextRun.displayDate}}</span>
                  <span class="date-time">{{nextRun.displayTime}}</span>
                </div>
                <div class="event-details">
                  <h2 class="event-title">{{nextRun.title}}</h2>
                  <div class="event-meta">
                    <span class="meta-item location">üìç {{nextRun.location}}</span>
                    {{#if nextRun.distance}}
                      <span class="meta-item distance">üìè {{nextRun.distance}}</span>
                    {{/if}}
                  </div>
                  {{#if nextRun.isSpecial}}
                    <span class="badge badge-special">Special Event</span>
                  {{/if}}
                  {{#if nextRun.externalVenueWarning}}
                    <p class="event-body"
                      style="color: var(--color-orange); font-weight: 600; margin-top: var(--space-2);">‚ö†Ô∏è
                      {{nextRun.externalVenueWarning}}
                    </p>
                  {{/if}}
                  {{#if nextRun.body}}
                    <p class="event-body">{{nextRun.body}}</p>
                  {{/if}}

                  <!-- Meeting Note (if distinct from body) or just extra info -->
                  {{#if nextRun.meetingNote}}
                    <p class="event-body" style="font-weight: 700; margin-top: var(--space-2);">{{nextRun.meetingNote}}
                    </p>
                  {{/if}}

                  {{#if nextRun.link}}
                    <a href="{{nextRun.link}}" class="btn btn-small"
                      style="background: white; color: var(--color-orange); width: fit-content; margin-top: var(--space-4);">
                      {{#if nextRun.linkText}}{{nextRun.linkText}}{{else}}More Info{{/if}}
                    </a>
                  {{/if}}
                </div>
              </div>
            </div>
          {{/if}}

          <!-- Upcoming Events Grid -->
          <h2 class="section-title">{{content.pages.events.upcomingTitle}}</h2>
          <div class="events-grid">
            {{#each eventsList}}
              <!-- Skip the first one if it's the same as nextRun, handled by logic or just show all in grid too? Let's show all in list below -->
              <div class="event-card {{color}}">
                <div class="event-header">
                  <span class="event-date-short">{{displayDate}}</span>
                  <span class="event-time-short">{{displayTime}}</span>
                </div>
                <div class="event-body-content">
                  <h3 class="event-title-small">{{title}}</h3>
                  <div class="event-meta-small">
                    <span>üìç {{this.location}}</span>
                    {{#if this.distance}}
                      <span>üìè {{this.distance}}</span>
                    {{/if}}
                  </div>

                  {{#if this.isSpecial}}
                    <span class="badge badge-special" style="margin-top: var(--space-2);">Special Event</span>
                  {{/if}}

                  {{#if this.externalVenueWarning}}
                    <p class="event-body-small"
                      style="color: var(--color-orange); font-weight: 600; margin-top: var(--space-2);">‚ö†Ô∏è
                      {{this.externalVenueWarning}}</p>
                  {{/if}}

                  {{#if this.body}}
                    <p class="event-body-small">{{this.body}}</p>
                  {{/if}}
                  {{#if this.meetingNote}}
                    <p class="event-body-small" style="font-weight: 700; margin-top: var(--space-2);">
                      {{this.meetingNote}}
                    </p>
                  {{/if}}

                  {{#if this.link}}
                    <a href="{{this.link}}" class="btn btn-small">
                      {{#if this.linkText}}{{this.linkText}}{{else}}Register{{/if}}
                    </a>
                  {{/if}}
                </div>
              </div>
            {{/each}}
          </div>
        </div>
      </section>
    </main>

    {{> footer}}
  </body>

</html>
