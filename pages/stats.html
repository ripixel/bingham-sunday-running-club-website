<!DOCTYPE html>
<html lang="en">
  {{> head}}

  <body class="dark-theme">
    {{> header}}

    <main>
      <!-- Page Header -->
      <section class="page-header">
        <div class="container">
          <h1 class="page-title">{{content.pages.stats_page.title}}</h1>
          <p class="page-subtitle">{{content.pages.stats_page.subtitle}}</p>
        </div>
      </section>

      <!-- Club Totals -->
      <section class="section section-club-totals">
        <div class="container">
          <div class="stats-totals-grid">
            <div class="stat-card stat-card-orange">
              <span class="stat-icon">üìÖ</span>
              <span class="stat-value">{{clubStats.totalEvents}}</span>
              <span class="stat-label">{{content.pages.stats_page.totals.eventsLabel}}</span>
            </div>
            <div class="stat-card stat-card-pink">
              <span class="stat-icon">üèÉ</span>
              <span class="stat-value">{{clubStats.totalRunners}}</span>
              <span class="stat-label">{{content.pages.stats_page.totals.runnersLabel}}</span>
            </div>
            <div class="stat-card stat-card-green">
              <span class="stat-icon">üìè</span>
              <span class="stat-value">{{clubStats.totalDistance}}km</span>
              <span class="stat-label">{{content.pages.stats_page.totals.distanceLabel}}</span>
            </div>
            <div class="stat-card stat-card-blue">
              <span class="stat-icon">üë•</span>
              <span class="stat-value">{{clubStats.avgAttendance}}</span>
              <span class="stat-label">{{content.pages.stats_page.totals.avgLabel}}</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Leaderboards -->
      <section class="section section-leaderboards">
        <div class="container">
          <h2 class="section-title">{{content.pages.stats_page.leaderboards.title}}</h2>

          <div class="leaderboards-grid">
            <!-- Most Events -->
            <div class="leaderboard-card">
              <h3 class="leaderboard-title">{{content.pages.stats_page.leaderboards.mostEvents}}</h3>
              <ol class="leaderboard-list">
                {{#each clubStats.topByEvents}}
                  <li class="leaderboard-item">
                    <span class="leaderboard-rank">{{rank}}</span>
                    <a href="/runners/{{slug}}/" class="leaderboard-runner">
                      {{> avatar photo=photo name=name firstInitial=firstInitial colorClass=colorClass size="small" }}
                      <span class="leaderboard-name">{{name}}</span>
                    </a>
                    <span class="leaderboard-stat">{{stat}} runs</span>
                  </li>
                {{/each}}
              </ol>
            </div>

            <!-- Most Distance -->
            <div class="leaderboard-card">
              <h3 class="leaderboard-title">{{content.pages.stats_page.leaderboards.mostDistance}}</h3>
              <ol class="leaderboard-list">
                {{#each clubStats.topByDistance}}
                  <li class="leaderboard-item">
                    <span class="leaderboard-rank">{{rank}}</span>
                    <a href="/runners/{{slug}}/" class="leaderboard-runner">
                      {{> avatar photo=photo name=name firstInitial=firstInitial colorClass=colorClass size="small" }}
                      <span class="leaderboard-name">{{name}}</span>
                    </a>
                    <span class="leaderboard-stat">{{stat}}km</span>
                  </li>
                {{/each}}
              </ol>
            </div>

            <!-- Fastest Pace -->
            <div class="leaderboard-card">
              <h3 class="leaderboard-title">{{content.pages.stats_page.leaderboards.fastestPace}}</h3>
              <ol class="leaderboard-list">
                {{#each clubStats.topByPace}}
                  <li class="leaderboard-item">
                    <span class="leaderboard-rank">{{rank}}</span>
                    <a href="/runners/{{slug}}/" class="leaderboard-runner">
                      {{> avatar photo=photo name=name firstInitial=firstInitial colorClass=colorClass size="small" }}
                      <span class="leaderboard-name">{{name}}</span>
                    </a>
                    <span class="leaderboard-stat">{{stat}}/km</span>
                  </li>
                {{/each}}
              </ol>
            </div>
          </div>
        </div>
      </section>

      <!-- Loop Champions -->
      <section class="section section-leaderboards">
        <div class="container">
          <h2 class="section-title">{{content.pages.stats_page.loopChampions.title}}</h2>

          <div class="leaderboards-grid">
            <!-- Most Small Loops -->
            <div class="leaderboard-card">
              <h3 class="leaderboard-title">{{content.pages.stats_page.loopChampions.smallLoops}}</h3>
              <ol class="leaderboard-list">
                {{#each clubStats.topBySmallLoops}}
                  <li class="leaderboard-item">
                    <span class="leaderboard-rank">{{rank}}</span>
                    <a href="/runners/{{slug}}/" class="leaderboard-runner">
                      {{> avatar photo=photo name=name firstInitial=firstInitial colorClass=colorClass size="small" }}
                      <span class="leaderboard-name">{{name}}</span>
                    </a>
                    <span class="leaderboard-stat">{{stat}} loops</span>
                  </li>
                {{/each}}
              </ol>
            </div>

            <!-- Most Medium Loops -->
            <div class="leaderboard-card">
              <h3 class="leaderboard-title">{{content.pages.stats_page.loopChampions.mediumLoops}}</h3>
              <ol class="leaderboard-list">
                {{#each clubStats.topByMediumLoops}}
                  <li class="leaderboard-item">
                    <span class="leaderboard-rank">{{rank}}</span>
                    <a href="/runners/{{slug}}/" class="leaderboard-runner">
                      {{> avatar photo=photo name=name firstInitial=firstInitial colorClass=colorClass size="small" }}
                      <span class="leaderboard-name">{{name}}</span>
                    </a>
                    <span class="leaderboard-stat">{{stat}} loops</span>
                  </li>
                {{/each}}
              </ol>
            </div>

            <!-- Most Long Loops -->
            <div class="leaderboard-card">
              <h3 class="leaderboard-title">{{content.pages.stats_page.loopChampions.longLoops}}</h3>
              <ol class="leaderboard-list">
                {{#each clubStats.topByLongLoops}}
                  <li class="leaderboard-item">
                    <span class="leaderboard-rank">{{rank}}</span>
                    <a href="/runners/{{slug}}/" class="leaderboard-runner">
                      {{> avatar photo=photo name=name firstInitial=firstInitial colorClass=colorClass size="small" }}
                      <span class="leaderboard-name">{{name}}</span>
                    </a>
                    <span class="leaderboard-stat">{{stat}} loops</span>
                  </li>
                {{/each}}
              </ol>
            </div>
          </div>
        </div>
      </section>

      <!-- Club Records -->
      {{#if content.pages.home.pbs.records.length}}
        <section class="section section-club-records">
          <div class="container">
            <h2 class="section-title">{{content.pages.stats_page.records.title}}</h2>
            <p class="section-subtitle">{{content.pages.stats_page.records.subtitle}}</p>
            <div class="records-grid">
              {{#each content.pages.home.pbs.records}}
                {{#if runner}}
                  <a href="/runners/{{runner}}/" class="record-card">
                {{else}}
                  <div class="record-card">
                {{/if}}
                <span class="record-distance">{{distance}}</span>
                <span class="record-time">{{time}}</span>
                <div class="record-holder">
                  {{#if photo}}
                    <img src="{{photo}}" alt="{{name}}" class="record-photo" />
                  {{/if}}
                  <span class="record-name">{{name}}</span>
                </div>
                <span class="record-date">{{date}}</span>
                {{#if runner}}
                  </a>
                {{else}}
            </div>
      {{/if}}
      {{/each}}
      </div>
      </div>
      </section>
      {{/if}}

    </main>

    {{> footer}}
  </body>

</html>
